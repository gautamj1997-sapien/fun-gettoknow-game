<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fun Get-to-Know Game</title>
<style>
  body {
    font-family: sans-serif;
    background: linear-gradient(to bottom right, #fff9c4, #f48fb1);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .container {
    text-align: center;
    background: white;
    padding: 2rem;
    border-radius: 2rem;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    max-width: 500px;
    width: 90%;
  }
  h1 { font-size: 2rem; margin-bottom: 1rem; }
  h2 { font-size: 1.5rem; margin-bottom: 1rem; }
  p { margin-bottom: 1.5rem; font-size: 1.1rem; }
  input { padding: 0.5rem; font-size: 1rem; border-radius: 0.5rem; width: 80%; margin-bottom: 1rem; }
  button {
    padding: 0.7rem 1.5rem;
    border-radius: 1rem;
    border: none;
    background: #f06292;
    color: white;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    transition: transform 0.2s;
  }
  button:hover { transform: scale(1.05); }
</style>
</head>
<body>

<div class="container" id="gameContainer">
  <h1>🌸 Vanakkam! 🌸</h1>
  <p>Enter your nickname to start this fun little journey 💫</p>
  <input type="text" id="nickname" placeholder="Your nickname"/>
  <br/>
  <button onclick="startGame()">Start 🚀</button>
</div>

<script>
// Google Sheets Web App URL
const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbydMj3ivnXsozEj9nOpfHdHAQ9Ob5Dw0ayW3CIZKsnSQKuyBW_TQsZmPThG2uwupdCR/exec";

// Layers & Questions
const layers = [
  {
    name: "Fun & Warm",
    questions: [
      "Which Tamil comedy scene always makes you laugh? 🤣",
      "If you could only use three emojis for the rest of the week, what would they be? 😎🥲🤣",
      "Would you rather have unlimited popcorn 🍿 or unlimited ice cream 🍦 forever?",
      "What's the silliest thing you're scared about? 🤪",
      "If you had a pet parrot 🦜, what’s the funniest thing you’d teach it to say?",
      "Ungaluku Kamal hassan oda fav movie and dialoge enna😉",
      "What’s the weirdest food combo you actually enjoy?"
    ]
  },
  {
    name: "Friendly & Engaged",
    questions: [
      "What’s the funniest nickname you’ve ever had?",
      "What song do you ALWAYS sing when no one’s listening?",
      "Would you rather pick midnight bike/car ride 🚲 or a beach walk 🌊?",
      "If you could swap lives with a Tamil movie character for one day, who would it be and why?",
      "What’s the most random talent or trick you have? 🤹",
      "What’s the most adventurous thing you’ve done?",
      "If you were in Bigg Boss house, how long would you survive? 📺🔥"
    ]
  },
  {
    name: "Thoughtfully Curious",
    questions: [
      "What’s one childhood memory that shaped who you are today?",
      "If you could re-live one past day, which day would it be?",
      "What instantly makes you feel calm and safe? 🌸",
      "What’s something small that gives you big happiness? 😍",
      "Who in your life has inspired you the most, and why?",
      "If you could go back in time and meet your younger self, what would you say?",
      "Do you prefer to express feelings through words 🎤, actions 🤝, or silence 🌙?"
    ]
  },
  {
    name: "Heart ❤️",
    questions: [
      "If your love story was a Tamil movie, what would the title be? 🎬💕",
      "What’s the sweetest thing you think I've observed or told you that made you feel special?",
      "If I was a character in your life’s movie, what role would I play? 😉",
      "Do you think soulmates are destined, or do we create them?",
      "What’s one thing you dream of doing with someone special someday? 🌌",
      "What kind of moment makes your heart race the most? 💣",
      "If the emotions you're feeling right now had a color, what color would yours be?"
    ]
  }
];

let layerIndex = 0;
let qIndex = 0;
let nickname = "";

function startGame() {
  nickname = document.getElementById("nickname").value.trim();
  if (!nickname) { alert("Please enter a nickname!"); return; }
  showQuestion();
}

function sendResponse(layer, question, response) {
  fetch(GOOGLE_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    body: JSON.stringify({
      sessionId: nickname,
      layer,
      question,
      response
    })
  }).catch(err => console.log(err));
}

function showQuestion() {
  if (layerIndex >= layers.length) {
    showOutro();
    return;
  }
  const container = document.getElementById("gameContainer");
  const currentLayer = layers[layerIndex];
  const currentQuestion = currentLayer.questions[qIndex];
  
  const answer = prompt(`${currentLayer.name}\n\n${currentQuestion}`, "");
  if (answer !== null) {
    sendResponse(currentLayer.name, currentQuestion, answer);
  }

  // Move to next question/layer
  if (qIndex + 1 < currentLayer.questions.length) {
    qIndex++;
  } else {
    qIndex = 0;
    layerIndex++;
  }

  showQuestion(); // recursive call until all layers done
}

function showOutro() {
  const container = document.getElementById("gameContainer");
  container.innerHTML = `
    <h2>🎉 You did it! 🎉</h2>
    <p>Thanks for playing. Your answers have been saved! Hope this gave you smiles, thoughts, and maybe a few heartbeats 💕</p>
    <button onclick="restartGame()">Play Again 🔄</button>
  `;
}

function restartGame() {
  layerIndex = 0;
  qIndex = 0;
  nickname = "";
  const container = document.getElementById("gameContainer");
  container.innerHTML = `
    <h1>🌸 Vanakkam! 🌸</h1>
    <p>Enter your nickname to start this fun little journey 💫</p>
    <input type="text" id="nickname" placeholder="Your nickname"/>
    <br/>
    <button onclick="startGame()">Start 🚀</button>
  `;
}
</script>
</body>
</html>
