<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fun Get-to-Know Game</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap');

  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: 'Baloo 2', cursive;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }

  body {
    background: linear-gradient(270deg, #ffecd2, #fcb69f, #ff9a9e, #fad0c4);
    background-size: 800% 800%;
    animation: gradientBG 20s ease infinite;
  }

  @keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
  }

  .container {
    background: rgba(255,255,255,0.95);
    padding: 2rem;
    border-radius: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    max-width: 480px;
    width: 90%;
    text-align: center;
    position: relative;
  }

  h1, h2 {
    margin-bottom: 1rem;
  }

  p {
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
  }

  input {
    padding: 0.6rem;
    font-size: 1rem;
    border-radius: 0.6rem;
    border: 2px solid #f06292;
    width: 80%;
    margin-bottom: 1rem;
    text-align: center;
  }

  button {
    padding: 0.7rem 1.5rem;
    border-radius: 1.2rem;
    border: none;
    background: #f06292;
    color: white;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
  }

  button:hover {
    transform: scale(1.05);
    background: #ec407a;
  }

  .confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    background: gold;
    animation: fly 1s linear forwards;
  }

  @keyframes fly {
    0% {opacity:1; transform: translateY(0) rotate(0deg);}
    100% {opacity:0; transform: translateY(-200px) rotate(360deg);}
  }

  .notification {
    position: absolute;
    top: -50px;
    left: 50%;
    transform: translateX(-50%);
    background: #ff9a9e;
    padding: 0.5rem 1rem;
    border-radius: 1rem;
    font-weight: bold;
    opacity: 0;
    animation: fadeInOut 3s forwards;
  }

  @keyframes fadeInOut {
    0% {opacity:0; transform: translate(-50%, -50px);}
    10% {opacity:1; transform: translate(-50%, 0);}
    90% {opacity:1; transform: translate(-50%, 0);}
    100% {opacity:0; transform: translate(-50%, -50px);}
  }
</style>
</head>
<body>
<div class="container" id="gameContainer">
  <h1>ðŸŒ¸ Vanakkam! ðŸŒ¸</h1>
  <p>Enter your nickname to start this fun little journey ðŸ’«</p>
  <input type="text" id="nickname" placeholder="Your nickname"/>
  <br/>
  <button onclick="startGame()">Start ðŸš€</button>
</div>

<script>
const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbydMj3ivnXsozEj9nOpfHdHAQ9Ob5Dw0ayW3CIZKsnSQKuyBW_TQsZmPThG2uwupdCR/exec";

const layers = [
  {
    name: "Fun & Warm",
    questions: [
      "Which Tamil comedy scene always makes you laugh? ðŸ¤£",
      "If you could only use three emojis for the rest of the week, what would they be? ðŸ˜ŽðŸ¥²ðŸ¤£",
      "Would you rather have unlimited popcorn ðŸ¿ or unlimited ice cream ðŸ¦ forever?",
      "What's the silliest thing you're scared about? ðŸ¤ª",
      "If you had a pet parrot ðŸ¦œ, whatâ€™s the funniest thing youâ€™d teach it to say?",
      "Ungaluku Kamal hassan oda fav movie and dialoge ennaðŸ˜‰",
      "Whatâ€™s the weirdest food combo you actually enjoy?"
    ]
  },
  {
    name: "Friendly & Engaged",
    questions: [
      "Whatâ€™s the funniest nickname youâ€™ve ever had?",
      "What song do you ALWAYS sing when no oneâ€™s listening?",
      "Would you rather pick midnight bike/car ride ðŸš² or a beach walk ðŸŒŠ?",
      "If you could swap lives with a Tamil movie character for one day, who would it be and why?",
      "Whatâ€™s the most random talent or trick you have? ðŸ¤¹",
      "Whatâ€™s the most adventurous thing youâ€™ve done?",
      "If you were in Bigg Boss house, how long would you survive? ðŸ“ºðŸ”¥"
    ]
  },
  {
    name: "Thoughtfully Curious",
    questions: [
      "Whatâ€™s one childhood memory that shaped who you are today?",
      "If you could re-live one past day, which day would it be?",
      "What instantly makes you feel calm and safe? ðŸŒ¸",
      "Whatâ€™s something small that gives you big happiness? ðŸ˜",
      "Who in your life has inspired you the most, and why?",
      "If you could go back in time and meet your younger self, what would you say?",
      "Do you prefer to express feelings through words ðŸŽ¤, actions ðŸ¤, or silence ðŸŒ™?"
    ]
  },
  {
    name: "Heart â¤ï¸",
    questions: [
      "If your love story was a Tamil movie, what would the title be? ðŸŽ¬ðŸ’•",
      "Whatâ€™s the sweetest thing you think I've observed or told you that made you feel special?",
      "If I was a character in your lifeâ€™s movie, what role would I play? ðŸ˜‰",
      "Do you think soulmates are destined, or do we create them?",
      "Whatâ€™s one thing you dream of doing with someone special someday? ðŸŒŒ",
      "What kind of moment makes your heart race the most? ðŸ’£",
      "If the emotions you're feeling right now had a color, what color would yours be?"
    ]
  }
];

let layerIndex = 0;
let qIndex = 0;
let nickname = "";

function startGame() {
  nickname = document.getElementById("nickname").value.trim();
  if(!nickname) { alert("Please enter a nickname!"); return; }
  showQuestion();
}

function sendResponse(layer, question, response) {
  fetch(GOOGLE_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    body: JSON.stringify({
      sessionId: nickname,
      layer,
      question,
      response
    })
  }).catch(err=>console.log(err));
}

function createConfetti() {
  const container = document.getElementById('gameContainer');
  for(let i=0;i<15;i++){
    const c = document.createElement('div');
    c.className='confetti';
    c.style.left=Math.random()*90+'%';
    c.style.background=['#fdd835','#fbc02d','#ffb74d','#ff8a65'][Math.floor(Math.random()*4)];
    container.appendChild(c);
    setTimeout(()=>{container.removeChild(c)},1000);
  }
}

function showNotification(msg){
  const container = document.getElementById('gameContainer');
  const note = document.createElement('div');
  note.className='notification';
  note.textContent = msg;
  container.appendChild(note);
  setTimeout(()=>{container.removeChild(note)},3000);
}

function showQuestion() {
  const container = document.getElementById('gameContainer');
  container.innerHTML = `<h2>${layers[layerIndex].name}</h2>
                         <p>${layers[layerIndex].questions[qIndex]}</p>
                         <input type="text" id="answerInput" placeholder="Your answer"/>
                         <br/>
                         <button id="submitBtn">Submit âœ…</button>`;
  const submitBtn = document.getElementById('submitBtn');
  submitBtn.onclick = () => {
    const answer = document.getElementById('answerInput').value.trim();
    if(answer===''){ alert("Please enter an answer!"); return; }
    sendResponse(layers[layerIndex].name, layers[layerIndex].questions[qIndex], answer);
    createConfetti();

    // Advance question/layer
    if(qIndex+1 < layers[layerIndex].questions.length) {
      qIndex++;
      setTimeout(showQuestion,800);
    } else if(layerIndex+1 < layers.length){
      layerIndex++;
      qIndex=0;
      showNotification("ðŸŽ‰ You're now getting dangerously closeâ€¦ ðŸ˜‰");
      setTimeout(showQuestion,1500);
    } else {
      showOutro();
    }
  }
}

function showOutro(){
  const container = document.getElementById('gameContainer');
  container.innerHTML = `<h2>ðŸŽ‰ You did it! ðŸŽ‰</h2>
                         <p>Thanks for playing. Your answers have been saved! Hope this gave you smiles, thoughts, and maybe a few heartbeats ðŸ’•</p>
                         <button onclick="restartGame()">Play Again ðŸ”„</button>`;
}

function restartGame(){
  layerIndex=0; qIndex=0; nickname="";
  const container = document.getElementById('gameContainer');
  container.innerHTML = `<h1>ðŸŒ¸ Vanakkam! ðŸŒ¸</h1>
                         <p>
